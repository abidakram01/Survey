<div class="createSurvey-block mb-5">
  <div class="row">
    <div class="col-md-9 surveyData" [class.text-right]="language == 'ar'">
      <div class="col p-0">
        <div class="pt-2 pb-2 align-self-center float-left w-100  text-center">
          <a href="javascript:void(0);" (click)="onSurveyStepChange(tabIdData.preview)" class="btn btn-primary btn-xs page-title-btn rounded-0  designSurvey">{{'design_survey.next' | translate }}&nbsp;</a>
        </div>
      </div>
      <div class="row">
      <div class="card" *ngIf="surveyData">
        <div class="card-body">
          <div class="col-md-12 p-0">
            <!-- ! Logo Upload -->
            <div class="p-2 align-self-center" *ngIf="surveyID">
              <div class="file-upload float-left mobile-full-width text-center">
                <label for="upload" class="file-upload__label"><i class="fa fa-upload" aria-hidden="true"></i>&nbsp;{{'design_survey.upload_logo' | translate }}</label>
                <input id="upload" class="file-upload__input" type="file" name="file-upload" (change)="uploader.uploadAll()" ng2FileSelect [uploader]="uploader">
              </div>
            </div>
            <div class="logoUpload p-2 align-self-center">
              <h4 class="survey-title pull-left">{{ surveyData.name ? surveyData.name : 'Untitled Survey' }}</h4>
              <a href="javascript:void(0);" (click)="openSurveyTitleModal()" class="float-right d-none logoedit"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
            </div>
            <div class="p-2 align-self-center">
              <a href="javascript:void(0);" (click)="openSurveyTitleModal()" class="btn btn-primary btn-xs page-title-btn rounded-0 pull-left mobile-full-width" [ngClass]="{'mb-2': !(surveyData.description && surveyData.description.length)}">
                <i class="fa fa-pencil-square-o" aria-hidden="true"></i>&nbsp; {{'design_survey.edit_survey_title_and_description' | translate }} </a>
                <a href="javascript:void(0);" class="float-right d-none logoedit"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
            </div>
          </div>
          <div class="col-md-12 p-0">
            <div class="questions-wrap pt-3">
              <div class="w-100 pull-left">
                <a href="javascript:void(0);" (click)="showAddNewQuestionModal()" class="btn btn-primary new-question-btn rounded-0 d-block d-sm-none" data-toggle="modal" data-target="#newQuestion"> <i class="fa fa-plus" aria-hidden="true"></i> &nbsp;{{'design_survey.new_question_label' | translate }}</a>
              </div>
              <div class="p-2 align-self-center logoUpload mt-3 mb-3 position-relative pr-4" *ngIf="surveyData.description">
                <span class="mb-0" [innerHTML]="surveyData.description"></span>
                <a href="javascript:void(0);" (click)="openSurveyTitleModal()" class="float-right d-none logoedit customEdit"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
              </div>
              <!-- Survey Builder -->
              <app-builder
                [surveyData]="surveyData"
                [setIsEdit]="isEdit"></app-builder>
              <!-- ./Survey Builder -->
            </div>
            <!-- ! TODO: copy and paste questions -->
            <!-- <p class="copyQuestions mt-3 text-center"> <a>Copy and paste questions</a> </p> -->
            <!-- ! TODO: footer notes -->
            <div class="p-2 align-self-center logoUpload mt-3 mb-3 position-relative pr-4" *ngIf="surveyData.thankyou_message">
              <span class="mb-0" [innerHTML]="surveyData.thankyou_message"></span>
              <a href="javascript:void(0);" (click)="openSurveyTitleModal()" class="float-right d-none logoedit customEdit"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
            </div>
            <div class="p-2 align-self-center text-center">
              <a href="javascript:void(0);" (click)="onSurveyBuilderSubmit()" class="btn btn-primary btn-xs page-title-btn rounded-0 ">{{'design_survey.save' | translate }}</a>
            </div>
          </div>
        </div>
      </div>
      <!-- TODO: survey progress bar -->
      <div class="w-100 bg-secondary text-black p-3">
        <div class="row">
          <div class="col"><!-- <span class="pull-right">0 of 0 answered</span>--> </div>
          <div class="col">
            <div class="progress w-50">
              <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col p-0">
        <div class="pt-2 pb-2 align-self-center float-left w-100  text-center">
          <a href="javascript:void(0);" (click)="onSurveyStepChange(tabIdData.preview)" class="btn btn-primary btn-xs page-title-btn rounded-0  designSurvey">{{'design_survey.next' | translate }}&nbsp;</a>
        </div>
      </div>
    </div>
  </div>
    <aside class="col-md-3 border tool-mt-custom p-3 d-none d-sm-block">
      <div class="tools-container">
        <h4>{{'design_survey.tools' | translate }}</h4>
        <h6>{{'design_survey.build_an_awesome_survey_using_the_following_tools' | translate }}</h6>
        <ul class="navbar-nav">
          <li class="nav-item mt-1">
            <button class="btn btn-outline-dark" (click)="addQuestion(questionType.singleInput)" type="button"> <i class="fa fa-keyboard-o"></i> &nbsp;{{'design_survey.single_input' | translate }} </button>
          </li>
          <li class="nav-item mt-1">
            <button class="btn btn-outline-dark" (click)="addQuestion(questionType.checkbox)" type="button"> <i aria-hidden="true" class="fa fa-check-square"></i> &nbsp;{{'design_survey.checkbox' | translate }} </button>
          </li>
          <li class="nav-item mt-1">
            <button class="btn btn-outline-dark" (click)="addQuestion(questionType.multipleChoice)" type="button"> <i class="fa fa-check-circle-o"></i> &nbsp;{{'design_survey.multiple_choice' | translate }} </button>
          </li>
          <li class="nav-item mt-1">
            <button class="btn btn-outline-dark" (click)="addQuestion(questionType.dropdown)" type="button"> <i class="fa fa-caret-square-o-down"></i> &nbsp;{{'design_survey.dropdown' | translate }} </button>
          </li>
          <li class="nav-item mt-1">
            <button class="btn btn-outline-dark" (click)="addQuestion(questionType.comment)" type="button"><i class="fa fa-comment"></i> &nbsp;{{'design_survey.comment' | translate }} </button>
          </li>
          <li class="nav-item mt-1">
            <button class="btn btn-outline-dark" (click)="addQuestion(questionType.rating)" type="button"><i aria-hidden="true" class="fa fa-star"></i> &nbsp; {{'design_survey.rating' | translate }}</button>
          </li>
        </ul>
      </div>
    </aside>
  </div>
</div>

<a href="javascript:void(0)" (click)="backClicked()">
  <-Back
</a>

<ng-template #newQuestionModal let-modal>
  <!-- <div class="modal-dialog modal-dialog-centered"> -->
    <!-- Modal content-->
    <div class="modal-content custom-popup">
      <button type="button" class="close" data-dismiss="modal" (click)="modal.close('Close click')">Ã—</button>
      <div class="modal-body">
        <ul class="navbar-nav">
          <li class="nav-item mt-1">
            <button (click)="addQuestion(questionType.singleInput)" class="btn btn-outline-dark" type="button"> <i class="fa fa-keyboard-o"></i> &nbsp;{{'design_survey.single_input' | translate }}</button>
          </li>
          <li class="nav-item mt-1">
            <button (click)="addQuestion(questionType.checkbox)" class="btn btn-outline-dark" type="button"> <i aria-hidden="true" class="fa fa-check-square"></i> &nbsp;{{'design_survey.checkbox' | translate }} </button>
          </li>
          <li class="nav-item mt-1">
            <button (click)="addQuestion(questionType.multipleChoice)" class="btn btn-outline-dark" type="button"> <i class="fa fa-check-circle-o"></i> &nbsp;{{'design_survey.multiple_choice' | translate }} </button>
          </li>
          <li class="nav-item mt-1">
            <button (click)="addQuestion(questionType.dropdown)" class="btn btn-outline-dark" type="button"> <i class="fa fa-caret-square-o-down"></i> &nbsp;{{'design_survey.dropdown' | translate }} </button>
          </li>
          <li class="nav-item mt-1">
            <button (click)="addQuestion(questionType.comment)" class="btn btn-outline-dark" type="button"><i class="fa fa-comment"></i> &nbsp;{{'design_survey.comment' | translate }} </button>
          </li>
          <li class="nav-item mt-1">
            <button (click)="addQuestion(questionType.rating)" class="btn btn-outline-dark" type="button"><i aria-hidden="true" class="fa fa-star"></i> &nbsp;{{'design_survey.rating' | translate }}</button>
          </li>
        </ul>
      </div>
    </div>
  <!-- </div> -->
</ng-template>

<ng-template #surveyTitleModal let-modal>
  <form  [formGroup]="surveyTitleForm" (ngSubmit)="onSurveyTitleFormSubmit()">
    <div class="modal-header">
      <h5 class="modal-title">{{'design_survey.edit_survey_title_and_description' | translate }}</h5>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body" [class.text-right]="language === 'ar'">
        <div class="form-group">
          <label for="survey-title">{{'design_survey.survey_title_label' | translate }}</label>
          <input type="text" class="form-control" formControlName="title" id="survey-title" autofocus placeholder="{{'design_survey.survey_title_label' | translate }}">
        </div>
        <div class="form-group">
          <label for="survey-description">{{'design_survey.survey_description_label' | translate }}</label>
          <small class="form-text text-muted">
            {{'design_survey.survey_description_info_label' | translate }}
          </small>
          <ckeditor [editor]="surveyEditor" [config]="surveyDescriptionConfig" formControlName="description" name="surveyDescription"></ckeditor>
        </div>
        <div class="form-group">
          <label for="survey-description">{{'design_survey.Survey_footer_note_label' | translate }}</label>
          <small class="form-text text-muted">
            {{'design_survey.footer_note_info_label' | translate }}
          </small>
          <ckeditor [editor]="surveyEditor" [config]="surveyDescriptionConfig" formControlName="thankyou_message" name="surveyDescription"></ckeditor>
        </div>
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-success">{{'design_survey.update_label' | translate }}</button>
      <button type="button" class="btn btn-danger" (click)="modal.close('Close click')">{{'design_survey.close' | translate }}</button>
    </div>
  </form>
</ng-template>
